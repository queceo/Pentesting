import  importlib
from threading import Thread
import subprocess
import sys

class Task:
    status = ['idle',''];
    name = [];
    thread = 0;

    #start the thread
    def startScript(self):
        self.thread.start();
        
    def __init__(self, scriptname):
        self.name = scriptname;
        
        self.thread = Thread(target = self.function);

    #get the status
    def getStatus(self):
        return self.thread.is_alive();

    #get the results
    def getResult(self):
        if self.thread.is_alive():
            print "Still Running";
        else:
            return self.status[1];

    #private function which runs the command
    def function(self):
        self.status[0] = "Running";
        try:
            self.status[1] = subprocess.check_output(self.name,shell=True);
            self.status[1] = self.status[1].replace("\r"," ");
            self.status[1] = self.status[1].replace("\n"," ");
        except:
            self.status[1] = "Invalid command: "+self.name;
        self.status[0] = "Done";

    #return the name
    def getName(self):
        return self.name;

    
    
